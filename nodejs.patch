From 3a7c447b560eda64bb19020f5e13639841ae6f64 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Elan=20Ruusam=C3=A4e?= <glen@delfi.ee>
Date: Sat, 16 Jun 2012 15:36:19 +0300
Subject: [PATCH] add recognizing of node.js script shebangs

---
 magic/Magdir/javascript |   17 +++++++++++++++++
 magic/Makefile.am       |    1 +
 2 files changed, 18 insertions(+)
 create mode 100644 magic/Magdir/javascript

diff --git a/magic/Magdir/javascript b/magic/Magdir/javascript
new file mode 100644
index 0000000..ad585c7
--- /dev/null
+++ b/magic/Magdir/javascript
@@ -0,0 +1,17 @@
+#------------------------------------------------------------------------------
+# $File: $
+# javascript:  magic for javascript and node.js scripts.
+#
+0	search/1/w	#!/bin/node		Node.js script text executable
+!:mime	application/javascript
+0	search/1/w	#!/usr/bin/node		Node.js script text executable
+!:mime	application/javascript
+0	search/1/w	#!/bin/nodejs		Node.js script text executable
+!:mime	application/javascript
+0	search/1/w	#!/usr/bin/nodejs		Node.js script text executable
+!:mime	application/javascript
+
+0	search/1	#!/usr/bin/env\ node	Node.js script text executable
+!:mime	application/javascript
+0	search/1	#!/usr/bin/env\ nodejs	Node.js script text executable
+!:mime	application/javascript
diff --git a/magic/Makefile.am b/magic/Makefile.am
index 23c4269..c3e1365 100644
--- a/magic/Makefile.am
+++ b/magic/Makefile.am
@@ -106,6 +106,7 @@ $(MAGIC_FRAGMENT_DIR)/island \
 $(MAGIC_FRAGMENT_DIR)/ispell \
 $(MAGIC_FRAGMENT_DIR)/isz \
 $(MAGIC_FRAGMENT_DIR)/java \
+$(MAGIC_FRAGMENT_DIR)/javascript \
 $(MAGIC_FRAGMENT_DIR)/jpeg \
 $(MAGIC_FRAGMENT_DIR)/karma \
 $(MAGIC_FRAGMENT_DIR)/kde \
-- 
1.7.10.1

