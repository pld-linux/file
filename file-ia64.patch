diff -rup file-3.28/Magdir/elf file-3.28-/Magdir/elf
--- file-3.28/Magdir/elf	Sun Oct 31 21:10:42 1999
+++ file-3.28-/Magdir/elf	Thu Feb 17 00:28:01 2000
@@ -59,7 +59,7 @@
 >>18	leshort		47		Hitachi H8/300H,
 >>18	leshort		48		Hitachi H8S,
 >>18	leshort		49		Hitachi H8/500,
->>18	leshort		50		IA-64 (Intel 64 bit architecture)
+>>18	leshort		50		IA-64,
 >>18	leshort		51		Stanford MIPS-X,
 >>18	leshort		52		Motorola Coldfire,
 >>18	leshort		53		Motorola M68HC12,
@@ -133,7 +133,7 @@
 >>18	beshort		47		Hitachi H8/300H,
 >>18	beshort		48		Hitachi H8S,
 >>18	beshort		49		Hitachi H8/500,
->>18	beshort		50		Intel Merced Processor,
+>>18	beshort		50		IA-64,
 >>18	beshort		51		Stanford MIPS-X,
 >>18	beshort		52		Motorola Coldfire,
 >>18	beshort		53		Motorola M68HC12,
diff -rup file-3.28/readelf.c file-3.28-/readelf.c
--- file-3.28/readelf.c	Sun Oct 31 22:23:04 1999
+++ file-3.28-/readelf.c	Thu Feb 17 00:29:14 2000
@@ -367,7 +367,7 @@ tryelf(fd, buf, nbytes)
 	    return;
 
 
-	class = buf[4];
+	class = buf[EI_CLASS];
 
 	if (class == ELFCLASS32) {
 		Elf32_Ehdr elfhdr;
@@ -375,9 +375,9 @@ tryelf(fd, buf, nbytes)
 			return;
 
 
-		u.l = 1;
 		(void) memcpy(&elfhdr, buf, sizeof elfhdr);
-		swap = (u.c[sizeof(long) - 1] + 1) != elfhdr.e_ident[5];
+		u.l = 1;
+		swap = (u.c[sizeof(u.l) - 1] + 1) != elfhdr.e_ident[EI_DATA];
 
 		if (getu16(swap, elfhdr.e_type) == ET_CORE) 
 #ifdef ELFCORE
@@ -412,9 +412,9 @@ tryelf(fd, buf, nbytes)
 			return;
 
 
-		u.l = 1;
 		(void) memcpy(&elfhdr, buf, sizeof elfhdr);
-		swap = (u.c[sizeof(long) - 1] + 1) != elfhdr.e_ident[5];
+		u.l = 1;
+		swap = (u.c[sizeof(u.l) - 1] + 1) != elfhdr.e_ident[EI_DATA];
 
 		if (getu16(swap, elfhdr.e_type) == ET_CORE) 
 #ifdef ELFCORE
